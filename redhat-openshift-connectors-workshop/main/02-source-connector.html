<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create source and sink OpenShift Connectors instances :: Red Hat OpenShift Connectors Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/redhat-openshift-connectors-workshop/redhat-openshift-connectors-workshop/main/02-source-connector.html">
    <link rel="prev" href="01-provision-kafka-instance.html">
    <link rel="next" href="03-source-cdc-connector.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/redhat-openshift-connectors-workshop">Red Hat OpenShift Connectors Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="redhat-openshift-connectors-workshop" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-provision-kafka-instance.html">1. Provision a Kafka instance in OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-provision-kafka-instance.html#redhat_account">Create a Red Hat Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-provision-kafka-instance.html#kafka">Provision a Kafka instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-provision-kafka-instance.html#configure_kafka">Configure the instance of Streams for Apache Kafka for use with OpenShift Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-source-connector.html">2. Create source and sink OpenShift Connectors instances</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#create_source_connector">Create a source connector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#create_sink_connector">Create a sink connector</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-source-cdc-connector.html">3. Create a source OpenShift Connectors instance for Change Data Capture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-source-cdc-connector.html#provision_mongo">Provision a MongoDB Atlas instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-source-cdc-connector.html#create_cdc_connector">Create a Connectors instance for Change Data Capture with MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-source-cdc-connector.html#capture_change_events">Capture Data Change Events from MongoDB</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Red Hat OpenShift Connectors Workshop</a></li>
    <li><a href="02-source-connector.html">2. Create source and sink OpenShift Connectors instances</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/redhat-openshift-connectors-workshop/edit/main/documentation/modules/ROOT/pages/02-source-connector.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Create source and sink OpenShift Connectors instances</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A <strong>source</strong> connector consumes events from an external data source and produces Kafka messages. A <strong>sink</strong> connector consumes messages from a Kafka topic and sends them to an external system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create_source_connector"><a class="anchor" href="#create_source_connector"></a>Create a Connectors instance for a data source</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this workshop, you create an instance of the <strong>Data Generator</strong> source connector. This connector does not actually consume data from an external system, but produces a Kafka message to a topic at a configurable interval.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the Application and Data Services page on <a href="https://console.redhat.com">console.redhat.com</a>, select <strong>Connectors</strong> and click <strong>Create Connectors instance</strong>.</p>
</li>
<li>
<p>Select the connector that you want to use for a data source.</p>
<div class="paragraph">
<p>You can browse through the catalog of available connectors. You can also search for a particular connector by name, and filter for sink or source connectors.</p>
</div>
<div class="paragraph">
<p>For example, to find the <strong>Data Generator</strong> source connector, type <strong>data</strong> in the search box. The list filters to show only the <strong>Data Generator Connector</strong> card.</p>
</div>
<div class="paragraph">
<p>Click the card to select the connector, and click <strong>Next</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/connectors-search-connector.png" alt="connectors search connector">
</div>
</div>
</li>
<li>
<p>For the <strong>Kafka instance</strong>, click the card for the Streams for Apache Kafka instance that you configured for connectors, and then click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Namespace</strong> page, click <strong>Create preview namespace</strong> to provision a namespace for hosting the connector instances that you create. This evaluation namespace will remain available for 48 hours. You can create up to four connector instances per namespace. Once the namespace is available, select it and click <strong>Next</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/connectors-eval-namespace.png" alt="connectors eval namespace">
</div>
</div>
</li>
<li>
<p>Configure the core configuration for your connector as follows:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Provide a name for the connector.</p>
</li>
<li>
<p>Type the <strong>Client ID</strong> and <strong>Client Secret</strong> of the service account that you created for your connectors, then click <strong>Next</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Provide the connector-specific configuration. For the <strong>Data Generator</strong> connector, provide the following information:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Data shape Format</strong>: Accept the default, <code>application/octet-stream</code>.</p>
</li>
<li>
<p><strong>Topic Names</strong>: Type the name of the topic that you created for connectors. For example, <code>test-topic</code>.</p>
</li>
<li>
<p><strong>Content Type</strong>: Accept the default, <code>text/plain</code>.</p>
</li>
<li>
<p><strong>Message</strong>: Type the content of the message that you want the connector instance to send to the Kafka topic. For example, type <code>Hello World!</code>.</p>
</li>
<li>
<p><strong>Period</strong>: Specify the interval (in milliseconds) at which you want the connector instance to send messages to the Kafka topic. For example, specify <code>10000</code>, to send a message every 10 seconds.</p>
<div class="imageblock">
<div class="content">
<img src="_images/connectors-datagenarator-configuration.png" alt="connectors datagenarator configuration">
</div>
</div>
<div class="paragraph">
<p>Click <strong>Next</strong> to continue.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the error handling policy for your connector instance.</p>
<div class="paragraph">
<p>The available options are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>stop</strong> - (the default) The connector instance shuts down when it encounters an error.</p>
</li>
<li>
<p><strong>log</strong> - The connector instance sends errors to its log.</p>
</li>
<li>
<p><strong>dead letter queue</strong> - The connector instance sends messages that it cannot handle to a dead letter topic that you define on the Streams for Apache Kafka instance.</p>
<div class="paragraph">
<p>Accept the default <strong>stop</strong> option, and click <strong>Next</strong>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Review the summary of the configuration properties and then click <strong>Create Connector</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your connector instance should now be listed in the table of connectors. After a couple of seconds, the status of your connector instance will change to the <code>Ready</code> state, and it will start producing messages and sending them to its associated Kafka topic.</p>
</div>
<div class="paragraph">
<p>From the connectors table, you can stop, start, and delete your connector, as well as edit its configuration, by clicking the options icon (three vertical dots).</p>
</div>
<div class="paragraph">
<p>To verify that the connector is actually generating messages to the topic, you can leverage the <em>Message viewer</em> functionality of the Streams for Apache Kafka UI.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Application and Data Services page on <a href="https://console.redhat.com">console.redhat.com</a>, select <strong>Streams for Apache Kafka</strong> &gt; <strong>Kafka Instances</strong>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click the Kafka instance that you created for connectors.</p>
</li>
<li>
<p>Click the <strong>Topics</strong> tab and then click the topic that you specified for your source connector instance.</p>
</li>
<li>
<p>Click the <strong>Messages</strong> tab to see a list of <code>Hello World!</code> messages.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-topic-view-messages.png" alt="rhosak topic view messages">
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create_sink_connector"><a class="anchor" href="#create_sink_connector"></a>Create a Connectors instance for a data sink</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <strong>sink</strong> connector consumes messages from a Kafka topic and sends them to an external system.</p>
</div>
<div class="paragraph">
<p>For this workshop, you use the <strong>HTTP Sink</strong> connector which consumes Kafka messages from one or more topics and sends the messages to an HTTP endpoint.</p>
</div>
<div class="paragraph">
<p>The <a href="https://webhook.site" target="_blank" rel="noopener">webhook.site</a> service offers a convenient way to obtain a general-purpose HTTP endpoint. Open a new tab in your browser and navigate to <a href="https://webhook.site" class="bare">https://webhook.site</a>. The page displays a unique URL that you can use as a data sink.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/webhook-site-endpoint.png" alt="webhook site endpoint">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Application and Data Services page on <a href="https://console.redhat.com">console.redhat.com</a>, select <strong>Connectors</strong> and click <strong>Create Connectors instance</strong>.</p>
</li>
<li>
<p>To find the <strong>HTTP Sink</strong> connector, enter <code>http</code> in the search field. Click the <strong>HTTP Sink</strong> connector card and then click <strong>Next</strong>.</p>
</li>
<li>
<p>Select the Streams for Apache Kafka instance for the connector to consume from.</p>
</li>
<li>
<p>On the <strong>Namespace</strong> page, click the <strong>eval</strong> namespace that you created when you created the source connector. Then click <strong>Next</strong>.</p>
</li>
<li>
<p>Provide the core configuration for your connector:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Type a unique name for the connector.</p>
</li>
<li>
<p>Type the <strong>Client ID</strong> and <strong>Client Secret</strong> of the service account that you created for your connectors and then click <strong>Next</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Provide the connector-specific configuration for your connector. For the <strong>HTTP Sink</strong> connector, provide the following information:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Data shape Format</strong>: Accept the default, <code>application/octet-stream</code>.</p>
</li>
<li>
<p><strong>Method</strong>: Accept the default, <code>POST</code>.</p>
</li>
<li>
<p><strong>URL</strong>: Type your unique URL from <a href="https://webhook.site" target="_blank" rel="noopener">webhook.site</a>.</p>
</li>
<li>
<p><strong>Topic Names</strong>: Type the name of the topic that you used for the source Connectors instance. For example, <code>test-topic</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Set the error handling policy to <strong>stop</strong>.</p>
</li>
<li>
<p>Review the summary of the configuration properties and click <strong>Create Connector</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your connector instance will be added to the table of connectors. After a couple of seconds, the status of your connector instance will change to the <code>Ready</code> state. The connector consumes messages from the associated Kafka topic and sends them to the HTTP endpoint.</p>
</div>
<div class="paragraph">
<p>Open the browser tab pointing to <a href="https://webhook.site" target="_blank" rel="noopener">webhook.site</a> to see the HTTP POST calls with the <code>Hello World!</code> messages that you defined in the source connector.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/webhook-site-post-messages.png" alt="webhook site post messages">
</div>
</div>
<div class="paragraph">
<p>You have created your first Red Hat OpenShift Connectors instances. From here, you can create other source and sink connectors to a variety of external systems and cloud services.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="01-provision-kafka-instance.html">1. Provision a Kafka instance in OpenShift Streams for Apache Kafka</a></span>
  <span class="next"><a href="03-source-cdc-connector.html">3. Create a source OpenShift Connectors instance for Change Data Capture</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
