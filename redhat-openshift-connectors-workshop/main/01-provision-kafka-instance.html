<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Provision a Kafka instance in OpenShift Streams for Apache Kafka :: Red Hat OpenShift Connectors Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/redhat-openshift-connectors-workshop/redhat-openshift-connectors-workshop/main/01-provision-kafka-instance.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="02-source-connector.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/redhat-openshift-connectors-workshop">Red Hat OpenShift Connectors Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="redhat-openshift-connectors-workshop" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-provision-kafka-instance.html">1. Provision a Kafka instance in OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#redhat_account">Create a Red Hat Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#kafka">Provision a Kafka instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#configure_kafka">Configure the instance of Streams for Apache Kafka for use with OpenShift Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-source-connector.html">2. Create source and sink OpenShift Connectors instances</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-source-connector.html#create_source_connector">Create a source connector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-source-connector.html#create_sink_connector">Create a sink connector</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-source-cdc-connector.html">3. Create a source OpenShift Connectors instance for Change Data Capture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-source-cdc-connector.html#provision_mongo">Provision a MongoDB Atlas instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-source-cdc-connector.html#create_cdc_connector">Create a Connectors instance for Change Data Capture with MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-source-cdc-connector.html#capture_change_events">Capture Change Data Events from MongoDB</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Red Hat OpenShift Connectors Workshop</a></li>
    <li><a href="01-provision-kafka-instance.html">1. Provision a Kafka instance in OpenShift Streams for Apache Kafka</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/redhat-openshift-connectors-workshop/edit/main/documentation/modules/ROOT/pages/01-provision-kafka-instance.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Provision a Kafka instance in OpenShift Streams for Apache Kafka</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As a developer of applications and services, you can use OpenShift Streams for Apache Kafka to create and set up Kafka instances and connect your applications and services to these instances. Streams for Apache Kafka is a managed cloud service that enables you to add Kafka data-streaming functionality in your applications without having to install, configure, run, and maintain your own Kafka clusters.</p>
</div>
<div class="paragraph">
<p>In this section of the lab you provision an instance of OpenShift Streams for Apache Kafka and configure it for use with Red Hat OpenShift Connectors</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redhat_account"><a class="anchor" href="#redhat_account"></a>Create a Red Hat account</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Skip to the <a href="#kafka">Provision a Kafka Instance</a> section if you already have a Red Hat Account.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need a Red Hat account to provision a managed Kafka instance. This is how you can create one:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://console.redhat.com">console.redhat.com</a>.</p>
</li>
<li>
<p>Click the <strong>Register for a Red Hat account</strong> link to create a Red Hat account.</p>
<div class="imageblock">
<div class="content">
<img src="_images/register-redhat-account.png" alt="register redhat account" width="60%">
</div>
</div>
<div class="paragraph">
<p>Be sure to select a <strong>Personal account</strong> type.</p>
</div>
</li>
<li>
<p>Complete the registration process, opening confirmation emails if necessary.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kafka"><a class="anchor" href="#kafka"></a>Provision a Kafka instance in OpenShift Streams for Apache Kafka</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://console.redhat.com">console.redhat.com</a> and log in with your Red Hat account.</p>
</li>
<li>
<p>On the <a href="https://console.redhat.com">console.redhat.com</a> landing page, select <strong>Application and Data Services</strong> from the menu on the left.</p>
</li>
<li>
<p>On the Application and Data Services landing page, select <strong>Streams for Apache Kafka â†’ Kafka Instances</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-kafka-instances.png" alt="rhosak kafka instances">
</div>
</div>
</li>
<li>
<p>On the Kafka Instances overview page, click the <strong>Create Kafka instance</strong> button. Enter a unique name and select the relevant <em>Cloud region</em> for your Kafka instance and click <strong>Create instance</strong>. This starts the provisioning process for your Kafka instance.</p>
</li>
<li>
<p>The new Kafka instance is listed in the instances table. After a couple of minutes, your instance should be marked as ready.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-kafka-instance-ready.png" alt="rhosak kafka instance ready">
</div>
</div>
</li>
<li>
<p>When the instance <em>Status</em> is <em>Ready</em>, you can start using the Kafka instance. You can use the <strong>Options</strong> icon (three vertical dots) to view, connect to, or delete the instance as needed.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure_kafka"><a class="anchor" href="#configure_kafka"></a>Configure the Streams for Apache Kafka instance for use with Red Hat OpenShift Connectors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you create a Streams for Apache Kafka instance, configure it for use with Red Hat OpenShift Connectors by performing the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create <strong>Kafka topics</strong> to store messages sent by producers (data sources) and make them available to consumers (data sinks).</p>
</li>
<li>
<p>Create <strong>service accounts</strong> that allow you to connect and authenticate your Connectors with Kafka instances.</p>
</li>
<li>
<p>Set up <strong>access rules</strong> for the service accounts that define how your Connectors can access and use the associated Kafka instance topics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Kafka topic for your connectors:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Application and Data Services page on <a href="https://console.redhat.com">console.redhat.com</a>, select <strong>Streams for Apache Kafka</strong> &gt; <strong>Kafka Instances</strong>.</p>
</li>
<li>
<p>Click the name of the Streams for Apache Kafka instance that you created for connectors.</p>
</li>
<li>
<p>Select the <strong>Topics</strong> tab, and then click <strong>Create topic</strong>, and follow the guided steps to define the topic details. Click <strong>Next</strong> to complete each step and click <strong>Finish</strong> to complete the setup.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-create-topic.png" alt="rhosak create topic">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Topic name</strong>: Type a unique name for your topic. For example, type <code>test-topic</code>.</p>
</li>
<li>
<p>Accept the default settings for partitions, message retention, and replicas.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create a service account for your connectors:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Application and Data Services page on <a href="https://console.redhat.com">console.redhat.com</a>, select <strong>Service Accounts</strong>, and then click <strong>Create service account</strong>.</p>
</li>
<li>
<p>Type a unique service account name (for example, <strong>connectors</strong> ) and then click <strong>Create</strong>.</p>
</li>
<li>
<p>Copy the generated <strong>Client ID</strong> and <strong>Client Secret</strong> to a secure location. You&#8217;ll use these credentials to configure connections to the Kafka instance.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated credentials are displayed only one time, so ensure that you&#8217;ve successfully and securely saved the copied credentials before closing the credentials window.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select the <strong>I have copied the client ID and secret</strong> option, and then click <strong>Close</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Set the level of access for your new service account in the Access Control List (ACL) of the Kafka instance:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Application and Data Services page on <a href="https://console.redhat.com">console.redhat.com</a>, select <strong>Streams for Apache Kafka</strong> &gt; <strong>Kafka Instances</strong>.</p>
</li>
<li>
<p>Click the name of the Streams for Apache Kafka instance that you created for connectors.</p>
</li>
<li>
<p>Click the <strong>Access</strong> tab to view the current ACL for this instance.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-default-access.png" alt="rhosak default access">
</div>
</div>
</li>
<li>
<p>Click <strong>Manage access</strong>.</p>
</li>
<li>
<p>From the <strong>Account</strong> drop-down menu, select the service account that you previously created, and then click <strong>Next</strong>.</p>
</li>
<li>
<p>Under <strong>Assign Permissions</strong>, click <strong>Add permission</strong>.</p>
</li>
<li>
<p>From the drop-down menu, select <strong>Consume from a topic</strong>. Set all resource identifiers to <code>is</code> and all identifier values to <code>"*"</code>.</p>
</li>
<li>
<p>From the <strong>Add permission</strong> drop-down menu, select <strong>Produce to a topic</strong>. Set all resource identifiers to <code>is</code> and all identifier values to <code>"*"</code>.</p>
<div class="paragraph">
<p>The <code>is "*"</code> settings enable connectors that are configured with the service account credentials to produce and consume messages in any topic in the Kafka instance.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-manage-access.png" alt="rhosak manage access">
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to add the permissions for the service account.<br>
The ACL for your Kafka instance should look like:</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-manage-access-done.png" alt="rhosak manage access done">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your Streams for Apache Kafka instance is now configured to be used by OpenShift Connectors.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Red Hat OpenShift Connectors Workshop</a></span>
  <span class="next"><a href="02-source-connector.html">2. Create source and sink OpenShift Connectors instances</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
